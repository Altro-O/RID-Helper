<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
    <title>SupportMate</title>
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/settings.css">
    <link rel="stylesheet" href="styles/dialogs.css">
  <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 0;
            background: #f8f9fa;
            min-width: 400px;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: #1a73e8;
            color: white;
            margin: 0;
        }

        .app-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .title-text {
            font-size: 17px;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        .title-badge {
            font-size: 11px;
            padding: 2px 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
        }

        .content-wrapper {
            background: white;
            overflow: hidden;
        }

        .tab-container {
            display: flex;
            gap: 12px;
            padding: 0 12px;
            margin-top: 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .tab {
            padding: 8px 12px;
            color: #5f6368;
            cursor: pointer;
            position: relative;
            font-size: 14px;
            border-radius: 4px 4px 0 0;
        }

        .tab:hover:not(.active) {
            color: #202124;
            background: rgba(0, 0, 0, 0.03);
        }

        .tab.active {
            color: #1a73e8;
            font-weight: 500;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 8px;
            right: 8px;
            height: 2px;
            background: #1a73e8;
            border-radius: 2px;
        }

        .link-input-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
            max-width: 320px;
            margin: 0 auto;
            padding: 16px;
        }

        .input-with-clear {
            position: relative;
            width: 100%;
        }

        .input-with-clear .link-input {
            width: 100%;
            height: 32px;
            padding: 0 32px 0 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 13px;
            background: #ffffff;
            transition: all 0.2s ease;
        }

        .input-with-clear .link-input:focus {
            border-color: #1a73e8;
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.1);
            outline: none;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 0 16px 16px;
            width: 100%;
            max-width: 320px;
            margin: 0 auto;
        }

        .primary-button {
            width: 100%;
            height: 36px;
            padding: 0 12px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            color: white;
            transition: all 0.2s ease;
        }

        .primary-button.blue {
            background: #1a73e8;
            box-shadow: 0 1px 2px rgba(26, 115, 232, 0.15);
        }

        .primary-button.blue:hover {
            background: #1557b0;
        }

        .primary-button svg {
            width: 16px;
            height: 16px;
        }

        .primary-button.green {
            background: #34a853;
            box-shadow: 0 1px 2px rgba(52, 168, 83, 0.15);
        }

        .primary-button.green:hover {
            background: #2d8745;
            box-shadow: 0 1px 3px rgba(52, 168, 83, 0.25);
        }

        .error-search-container {
            padding: 12px 16px;
            position: sticky;
            top: 0;
            background: white;
            border-bottom: 1px solid #e0e0e0;
            z-index: 10;
        }

        .error-search-input {
            width: 100%;
            height: 36px;
            padding: 0 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 13px;
            background: #f8f9fa;
            transition: all 0.2s ease;
        }

        .error-search-input:focus {
            background: white;
            border-color: #1a73e8;
            box-shadow: 0 1px 2px rgba(26,115,232,0.15);
            outline: none;
        }

        .error-item {
            padding: 16px;
            transition: all 0.2s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .error-item:last-child {
            border-bottom: none;
        }

        .error-item:hover {
            background: #fafafa;
        }

        .error-code {
            display: inline-flex;
            align-items: center;
            font-weight: 500;
            color: #1a73e8;
            margin-bottom: 8px;
            padding: 4px 8px;
            background: #e8f0fe;
            border-radius: 4px;
            font-size: 12px;
            letter-spacing: 0.3px;
        }

        .error-message {
            color: #202124;
            font-size: 13px;
            margin-bottom: 8px;
            line-height: 1.4;
            font-weight: 500;
        }

        .error-description {
            color: #5f6368;
            font-size: 12px;
            margin: 8px 0;
            line-height: 1.4;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .error-action {
            margin-top: 12px;
            padding: 12px;
            border-radius: 6px;
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
        }

        .error-action strong {
            color: #1a73e8;
            display: block;
            margin-bottom: 6px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        #errorResults {
            max-height: 600px;
            overflow-y: auto;
            background: white;
            scrollbar-width: thin;
            scrollbar-color: #e0e0e0 transparent;
        }

        #errorResults::-webkit-scrollbar {
            width: 6px;
        }

        #errorResults::-webkit-scrollbar-track {
            background: transparent;
        }

        #errorResults::-webkit-scrollbar-thumb {
            background-color: #e0e0e0;
            border-radius: 3px;
        }

        .footer {
            text-align: center;
            padding: 16px;
            color: #5f6368;
            font-size: 12px;
        }

        .footer a {
            color: #1a73e8;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .download-button {
            width: 100%;
            max-width: 320px;
            height: 36px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: #1a73e8;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .download-button:hover {
            background: #1557b0;
        }

        .download-button svg {
            width: 18px;
            height: 18px;
        }

        .search-container {
            position: relative;
            margin: 8px 12px;
        }

        .search-input {
            width: 100%;
            height: 36px;
            padding: 0 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 13px;
            background: #ffffff;
            transition: all 0.2s ease;
        }

        .search-input:focus {
            border-color: #1a73e8;
            box-shadow: 0 1px 2px rgba(26,115,232,0.15);
            outline: none;
        }

        .categories-container {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            padding: 0 12px 8px;
        }

        .category-chip {
            font-size: 12px;
            padding: 4px 12px;
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 16px;
            color: #5f6368;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .category-chip:hover {
            background: #f1f3f4;
            color: #202124;
        }

        .category-chip.active {
            background: #e8f0fe;
            color: #1a73e8;
            border-color: #1a73e8;
        }
    </style>
</head>
<body>
    <div class="onboarding-dialog" id="onboardingDialog">
        <div class="onboarding-content">
            <div class="onboarding-step" data-step="1">
                <h2>üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ SupportMate</h2>
                <p>–î–∞–≤–∞–π—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è! –ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?</p>
                <input type="text" id="userName" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" class="onboarding-input">
                <button class="onboarding-button" id="firstStepButton" onclick="nextStep(1)">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            </div>
            
            <div class="onboarding-step" data-step="2" style="display: none;">
                <h2>üîç –ü–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º</h2>
                <p>–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π. –ü—Ä–æ—Å—Ç–æ –Ω–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç!</p>
                <div class="feature-preview">
                    <img src="images/search-preview.png" alt="–ü–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º">
                </div>
                <button class="onboarding-button" id="secondStepButton">–î–∞–ª–µ–µ</button>
            </div>
            
            <div class="onboarding-step" data-step="3" style="display: none;">
                <h2>üîÑ –†–∞–±–æ—Ç–∞ —Å RID</h2>
                <p>–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ RID –∏ —É–¥–æ–±–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.</p>
                <div class="feature-preview-container">
                    <div class="feature-preview active">
                        <img src="images/rid-preview.png" alt="–†–∞–±–æ—Ç–∞ —Å RID">
                    </div>
                    <div class="feature-preview">
                        <img src="images/–†–∞–±–æ—Ç–∞ —Å RID 2.png" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —Å RID">
                    </div>
                    <div class="preview-dots">
                        <span class="preview-dot active"></span>
                        <span class="preview-dot"></span>
                    </div>
                </div>
                <button class="onboarding-button" id="thirdStepButton">–î–∞–ª–µ–µ</button>
            </div>
            
            <div class="onboarding-step" data-step="4" style="display: none;">
                <h2> –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h2>
                <p>–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞–º.</p>
                <div class="feature-preview-container">
                    <div class="feature-preview active">
                        <img src="images/transactions-preview.png" alt="–ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π">
                    </div>
                    <div class="feature-preview">
                        <img src="images/RRN2.png" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π">
                    </div>
                    <div class="preview-dots">
                        <span class="preview-dot active"></span>
                        <span class="preview-dot"></span>
                    </div>
                </div>
                <button class="onboarding-button" id="fourthStepButton">–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</button>
            </div>
            
            <div class="onboarding-progress">
                <span class="progress-dot active" data-step="1"></span>
                <span class="progress-dot" data-step="2"></span>
                <span class="progress-dot" data-step="3"></span>
                <span class="progress-dot" data-step="4"></span>
            </div>
        </div>
    </div>

    <div class="header">
        <div class="welcome-message" id="welcomeMessage"></div>
        <div class="app-title">
            <span class="title-text">SupportMate</span>
            <span class="title-badge">Pro</span>
        </div>
        <button class="settings-button" id="settingsButton" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.65.07.97l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65z"/>
            </svg>
        </button>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div class="settings-panel">
        <div class="settings-header">
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <button class="settings-close">‚úï</button>
        </div>
        <div class="settings-content">
            <div class="settings-section">
                <h3>–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞</h3>
                <div class="font-size-controls">
                    <input type="range" id="fontSizeSlider" class="font-size-slider" min="12" max="24" value="14">
                    <span id="fontSizeValue">14px</span>
                </div>
            </div>
            <div class="settings-section">
                <h3>–°—Ç–∏–ª—å —Ç–µ–∫—Å—Ç–∞</h3>
                <div class="text-style-controls">
                    <select id="fontFamilySelect" class="style-select">
                        <option value="'Segoe UI', Arial, sans-serif">Segoe UI</option>
                        <option value="Arial, sans-serif">Arial</option>
                        <option value="'Roboto', sans-serif">Roboto</option>
                        <option value="'Open Sans', sans-serif">Open Sans</option>
                        <option value="'Times New Roman', serif">Times New Roman</option>
                    </select>
                    <div class="text-weight-controls">
                        <label>
                            <input type="checkbox" id="boldText"> –ñ–∏—Ä–Ω—ã–π
                        </label>
                        <label>
                            <input type="checkbox" id="italicText"> –ö—É—Ä—Å–∏–≤
                        </label>
                    </div>
                </div>
            </div>
            <div class="settings-section">
                <h3>–†–∞–∑–º–µ—Ä –æ–∫–Ω–∞</h3>
                <div class="window-size-presets">
                    <button class="preset-button" data-width="450" data-height="300">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="3" y1="9" x2="21" y2="9"></line>
                        </svg>
                        450 √ó 300
                        <span class="preset-label">–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π</span>
                    </button>
                    <button class="preset-button" data-width="600" data-height="400">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                        </svg>
                        600 √ó 400
                        <span class="preset-label">–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π</span>
                    </button>
                    <button class="preset-button" data-width="800" data-height="600">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="3" y1="15" x2="21" y2="15"></line>
                        </svg>
                        800 √ó 600
                        <span class="preset-label">–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π</span>
                    </button>
                    <button class="preset-button" data-width="800" data-height="1000">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                        800 √ó 1000
                        <span class="preset-label">–í—ã—Å–æ–∫–∏–π</span>
                    </button>
                </div>
                <div class="window-size-custom">
                    <div class="size-input-group">
                        <input type="number" id="windowWidth" min="400" max="1200" placeholder="–®–∏—Ä–∏–Ω–∞">
                        <span class="size-separator">√ó</span>
                        <input type="number" id="windowHeight" min="300" max="2000" placeholder="–í—ã—Å–æ—Ç–∞">
                    </div>
                    <button id="applyCustomSize" class="apply-size-button">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                        –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                    </button>
                </div>
                <div class="size-recommendations">
                    <p class="size-tip">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="16" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                        –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–∞–∑–º–µ—Ä—ã:
                    </p>
                    <ul class="size-tips-list">
                        <li>450 √ó 300 - –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º</li>
                        <li>600 √ó 400 - –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä</li>
                        <li>800 √ó 600 - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º</li>
                        <li>800 √ó 1000 - –í—ã—Å–æ–∫–∏–π —Ä–µ–∂–∏–º</li>
                    </ul>
                    <p class="size-warning">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 400 √ó 300
                    </p>
                </div>
            </div>
        </div>
    </div>


    <div class="tabs">
        <div class="tab" data-tab="problems">–ü–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º</div>
        <div class="tab" data-tab="rids">–†–∞–±–æ—Ç–∞ —Å RID</div>
        <div class="tab" data-tab="transactions">–ü–æ–∏—Å–∫ RRN</div>
        <div class="tab" data-tab="errors">–û—à–∏–±–∫–∏ –æ–ø–ª–∞—Ç—ã</div>
    </div>

    <div class="content-wrapper">
        <div id="problemsTab" class="tab-content active">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º..." class="search-input">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </div>

            <div id="categoriesContainer" class="categories-container">
                <div class="category-chip active">–í—Å–µ</div>
                <div class="category-chip">Travel</div>
                <div class="category-chip">WB –ë–∞–Ω–∫</div>
                <div class="category-chip">–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏</div>
                <div class="category-chip">–í–∑–∞–∏–º–æ—Ä–∞—Å—á–µ—Ç—ã</div>
                <div class="category-chip">–ñ–∞–ª–æ–±—ã</div>
            </div>

            <div class="results-header">
                <span id="resultsCount">–ù–∞–π–¥–µ–Ω–æ: 0</span>
            </div>

            <div id="resultsContainer" class="results-container">
                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
            </div>
        </div>

        <div id="ridsTab" class="tab-content">
            <div class="link-input-container">
                <div class="input-with-clear">
                    <input type="text" id="linkInput" class="link-input" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ transaction_id –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è">
                    <button class="clear-input" title="–û—á–∏—Å—Ç–∏—Ç—å">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="button-container">
                <button id="extractFromLink" class="primary-button blue">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                    </svg>
                    –ò–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ
                </button>
                <button id="insertRids" class="primary-button green">–í—Å—Ç–∞–≤–∏—Ç—å RID</button>
            </div>
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
                <div class="progress-info">
                    <span id="progressText">–í—Å—Ç–∞–≤–∫–∞ RID: 0/0</span>
                    <span class="progress-cancel" id="cancelProgress">–û—Ç–º–µ–Ω–∏—Ç—å</span>
                </div>
            </div>
            <div id="savedRids"></div>
        </div>

        <div class="tab-content" id="transactionsTab" style="display: none;">
            <div class="transaction-search">
                <input type="text" id="transactionInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (int_transaction)">
                <button class="clear-input" title="–û—á–∏—Å—Ç–∏—Ç—å">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="transactionInfo"></div>
        </div>

        <div class="tab-content" id="ridTab">
            <div id="foundRids" class="rid-container">
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –Ω–∞–π–¥–µ–Ω–Ω—ã–µ RID -->
            </div>
        </div>

        <div id="errorsTab" class="tab-content">
            <div class="error-search-container">
                <input type="text" id="errorSearchInput" class="error-search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –æ—à–∏–±–∫–∏ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ...">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </div>
            <div id="errorResults" class="error-results">
                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
    </div>

    <div class="footer">
        Created by <a href="https://t.me/Kravchenk0_official" target="_blank">@Kravchenk0_official</a>
    </div>

    <div id="updateDialog" class="dialog">
        <div class="dialog-content">
            <h2>–î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</h2>
            <div id="updateChanges" class="update-changes"></div>
            <div class="dialog-buttons">
                <button id="updateButton" class="primary-button blue">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8 2.5V11M8 11L4.5 7.5M8 11L11.5 7.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    –û–±–Ω–æ–≤–∏—Ç—å
                </button>
                <button class="secondary-button" onclick="document.getElementById('updateDialog').classList.remove('visible')">
                    –ü–æ–∑–∂–µ
                </button>
            </div>
        </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ -->
    <button class="feedback-button" id="feedbackButton" title="–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
        </svg>
    </button>

    <!-- –î–∏–∞–ª–æ–≥ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ -->
    <div class="feedback-dialog" id="feedbackDialog">
        <div class="feedback-content">
            <div class="feedback-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
                </svg>
                –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
            </div>
            <form class="feedback-form" id="feedbackForm">
                <div class="feedback-type">
                    <input type="radio" name="feedbackType" id="typeSuggestion" value="suggestion" checked>
                    <label for="typeSuggestion">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                        </svg>
                        –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
                    </label>
                    <input type="radio" name="feedbackType" id="typeBug" value="bug">
                    <label for="typeBug">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                            <path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"></path>
                            <circle cx="12" cy="12" r="7"></circle>
                        </svg>
                        –û—à–∏–±–∫–∞
                    </label>
                    <input type="radio" name="feedbackType" id="typeOther" value="other">
                    <label for="typeOther">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 16v-4M12 8h.01"></path>
                        </svg>
                        –î—Ä—É–≥–æ–µ
                    </label>
                </div>
                <textarea class="feedback-input" id="feedbackText" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—É..." required></textarea>
                <div class="feedback-buttons">
                    <button type="button" class="feedback-cancel" id="feedbackCancel">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="feedback-submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
                <div class="feedback-success" id="feedbackSuccess">
                    –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤! –ú—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ–≥–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º.
                </div>
            </form>
        </div>
    </div>

    <div id="connectionError" class="connection-error" style="display: none;">
        <span id="connectionMessage">–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</span>
    </div>

    <script src="problemsDatabase.js"></script>
    <script src="src/services/feedback.js"></script>
    <script src="src/services/transactionSearch.js" type="module"></script>
    <script src="popup.js" type="module"></script>
    <script src="settings.js"></script>
    <script src="errors.js"></script>
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∏–ª–µ–π
        window.addEventListener('load', function() {
            const styleSheets = document.styleSheets;
            const loadedStyles = Array.from(styleSheets).map(sheet => sheet.href).filter(Boolean);
            const requiredStyles = [
                'styles/base.css',
                'styles/components.css',
                'styles/layout.css',
                'styles/settings.css',
                'styles/dialogs.css'
            ];
            
            const missingStyles = requiredStyles.filter(style => 
                !loadedStyles.some(loaded => loaded.includes(style))
            );

            if (missingStyles.length > 0) {
                const debugElement = document.createElement('div');
                debugElement.className = 'debug-styles-missing';
                debugElement.textContent = `–ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å—Ç–∏–ª–∏: ${missingStyles.join(', ')}`;
                debugElement.style.display = 'block';
                document.body.insertBefore(debugElement, document.body.firstChild);
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showConnectionMessage(message, type) {
            const errorElement = document.getElementById('connectionError');
            const messageElement = document.getElementById('connectionMessage');
            
            errorElement.style.display = 'flex';
            messageElement.textContent = message;
            
            errorElement.className = 'connection-error ' + type;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        function retryConnection(maxAttempts = 3, delay = 1000) {
            let attempts = 0;
            
            function tryConnect() {
                if (attempts >= maxAttempts) {
                    showConnectionMessage('–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.', '');
                    console.error('–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ', maxAttempts, '–ø–æ–ø—ã—Ç–æ–∫');
                    return;
                }
                
                attempts++;
                showConnectionMessage('–ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è... (' + attempts + '/' + maxAttempts + ')', 'reconnecting');
                
                try {
                    chrome.runtime.connect();
                    showConnectionMessage('–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!', 'success');
                    setTimeout(() => {
                        document.getElementById('connectionError').style.display = 'none';
                    }, 3000);
                } catch (error) {
                    console.log('–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ' + attempts + ' –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ ' + delay + '–º—Å');
                    setTimeout(tryConnect, delay);
                }
            }
            
            tryConnect();
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        window.addEventListener('error', function(event) {
            if (event.message.includes('Could not establish connection')) {
                console.log('–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –ø—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è...');
                retryConnection();
            }
        });
    </script>
</body>
</html> 