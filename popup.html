<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SupportMate</title>
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/settings.css">
    <link rel="stylesheet" href="styles/dialogs.css">
    <style>
        /* Временные стили для отладки */
        .debug-styles-missing {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #ff5252;
            color: white;
            padding: 8px;
            text-align: center;
            z-index: 9999;
            display: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>SupportMate</h1>
        <div class="header-controls">
            <button id="settingsButton" class="header-button">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Панель настроек -->
    <div class="settings-panel">
        <div class="settings-header">
            <h2>Настройки</h2>
            <button class="settings-close">✕</button>
        </div>
        <div class="settings-content">
            <div class="settings-section">
                <h3>Размер текста</h3>
                <div class="font-size-controls">
                    <input type="range" id="fontSizeSlider" class="font-size-slider" min="12" max="24" value="14">
                    <span id="fontSizeValue">14px</span>
                </div>
            </div>
            <div class="settings-section">
                <h3>Стиль текста</h3>
                <div class="text-style-controls">
                    <select id="fontFamilySelect" class="style-select">
                        <option value="'Segoe UI', Arial, sans-serif">Segoe UI</option>
                        <option value="Arial, sans-serif">Arial</option>
                        <option value="'Roboto', sans-serif">Roboto</option>
                        <option value="'Open Sans', sans-serif">Open Sans</option>
                        <option value="'Times New Roman', serif">Times New Roman</option>
                    </select>
                    <div class="text-weight-controls">
                        <label>
                            <input type="checkbox" id="boldText"> Жирный
                        </label>
                        <label>
                            <input type="checkbox" id="italicText"> Курсив
                        </label>
                    </div>
                </div>
            </div>
            <div class="settings-section">
                <h3>Размер окна</h3>
                <p>Потяните за правый нижний угол окна, чтобы изменить размер</p>
                <div class="window-size-info">
                    <span id="windowSizeValue">450 x 300</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Маркер изменения размера -->
    <div class="resize-handle" title="Потяните, чтобы изменить размер окна"></div>

    <div class="tabs">
        <div class="tab active" data-tab="problems">Поиск проблем</div>
        <div class="tab" data-tab="rids">Работа с RID</div>
    </div>

    <div class="content-wrapper">
        <div id="problemsTab" class="tab-content active">
            <div class="search-container">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input type="text" id="searchInput" placeholder="Поиск проблем...">
            </div>

            <div class="filters-container">
                <div class="categories-container" id="categoriesContainer">
                    <!-- Категории будут добавлены динамически -->
                </div>
                <div class="popular-queries">
                    <div class="query-chip" data-query="возврат">возврат</div>
                    <div class="query-chip" data-query="брак">брак</div>
                    <div class="query-chip" data-query="доставка">доставка</div>
                    <div class="query-chip" data-query="отказ">отказ</div>
                </div>
            </div>

            <div class="results-header">
                <div class="results-count" id="resultsCount"></div>
            </div>

            <div class="results-container" id="resultsContainer">
                <!-- Результаты поиска будут добавлены здесь -->
            </div>

            <div class="stats-container">
                <div class="stats-item">
                    <span class="stats-label">Сэкономлено времени:</span>
                    <span class="stats-value" id="timeSaved">0 мин</span>
                </div>
                <div class="stats-item">
                    <span class="stats-label">Обработано проблем:</span>
                    <span class="stats-value" id="problemsProcessed">0</span>
                </div>
                <div class="stats-item">
                    <span class="stats-label">Использовано RID:</span>
                    <span class="stats-value" id="ridsUsed">0</span>
                </div>
            </div>
        </div>

        <div id="ridsTab" class="tab-content">
    <textarea id="ridInput" placeholder="Вставьте JSON с RID значениями или список RID (каждый RID с новой строки)"></textarea>
            <div class="button-group">
                <button id="extractRids">Извлечь RID</button>
                <button id="insertRids">Вставить RID</button>
            </div>
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
                <div class="progress-info">
                    <span id="progressText">Вставка RID: 0/0</span>
                    <span class="progress-cancel" id="cancelProgress">Отменить</span>
                </div>
            </div>
    <div id="savedRids"></div>
  </div>
    </div>

    <div class="footer">
        Created by <a href="https://t.me/Kravchenk0_official" target="_blank">@Kravchenk0_official</a>
    </div>

    <div class="resize-handle"></div>

    <div class="update-dialog" id="updateDialog">
        <div class="update-content">
            <div class="update-title">Доступно обновление</div>
            <div class="update-changes" id="updateChanges"></div>
            <div class="update-steps">
                <div class="update-step">
                    <div class="step-number">1</div>
                    <div>Нажмите кнопку "Обновить сейчас" для загрузки новой версии</div>
                </div>
                <div class="update-step">
                    <div class="step-number">2</div>
                    <div>Перейдите в chrome://extensions/</div>
                </div>
                <div class="update-step">
                    <div class="step-number">3</div>
                    <div>Нажмите кнопку обновления или переустановите расширение</div>
                </div>
            </div>
            <div class="update-buttons">
                <button class="update-button update-now" id="updateNow">Обновить сейчас</button>
                <button class="update-button update-later" id="updateLater">Позже</button>
            </div>
        </div>
    </div>

    <script src="problemsDatabase.js"></script>
    <script src="popup.js"></script>
    <script>
        // Проверка загрузки стилей
        window.addEventListener('load', function() {
            const styleSheets = document.styleSheets;
            const loadedStyles = Array.from(styleSheets).map(sheet => sheet.href).filter(Boolean);
            const requiredStyles = [
                'styles/base.css',
                'styles/components.css',
                'styles/layout.css',
                'styles/settings.css',
                'styles/dialogs.css'
            ];
            
            const missingStyles = requiredStyles.filter(style => 
                !loadedStyles.some(loaded => loaded.includes(style))
            );

            if (missingStyles.length > 0) {
                const debugElement = document.createElement('div');
                debugElement.className = 'debug-styles-missing';
                debugElement.textContent = `Не загружены стили: ${missingStyles.join(', ')}`;
                debugElement.style.display = 'block';
                document.body.insertBefore(debugElement, document.body.firstChild);
            }
        });
    </script>
</body>
</html> 